{"version":3,"sources":["sdk/aws-exports.js","sdk/AWSConnector.js","sdk/QoSSDK.js","sdk/videojs/utils.js","Components/SampleVideos.js","Components/GetVideo.jsx","Queries/GetVideoQuery.js","Queries/GetVideoSubscription.js","Components/SubscribeVideo.js","Components/AllVideos.jsx","Queries/AllVideosQuery.js","Queries/AllVideosSubscription.js","Components/PopularVideos.js","Components/ActiveUser.jsx","Queries/GetActiveUserQuery.js","Queries/ActiveUserSubscription.js","Components/SubscribeActiveUser.js","Components/VideoJSPlayer.js","Components/AppBar.js","App.js","registerServiceWorker.js","index.js"],"names":["awsmobile","graphqlEndpoint","authenticationType","apiKey","cloudfront_domain","firehose","DeliveryStreamName","aws","region","cognito","IdentityPoolId","sdk_AWSConnector","_createClass","AWSConnector","_classCallCheck","this","AWS","update","ClientConfig","console","log","credentials","key","value","userId","params","IdentityId","refresh","identityId","getUserId","data","callback","firehoseParams","Record","Data","JSON","stringify","putRecord","SDK","playerComponent","player","sdk","connection","navigator","mozConnection","webkitConnection","getConnectionType","type","effectiveType","rtt","resetVideo","videoId","previousTime","currentTime","seekStart","seekStartTime","seekEndTime","loadStarted","dataLoaded","percentSeen","packageType","avgBitrate","duration","resolution","frameRate","bufferStarted","resetUser","cognitoId","firstNAme","lastName","getUser","displayMetrics","sendToAWS","calculatedMetrics","push","error","currentUser","currentVideo","commonAttr","connectionType","Metric","MetricType","MetricValue","_objectSpread","TimeStamp","Date","now","FIRSTFRAME","connection_type","package","fps","avg_bitrate","time_millisecond","cdn_tracking_id","SEEK","seek_from","seek_to","PLAY","at","BUFFER","buffer_type","PAUSE","ERROR","message","STOP","STREAM","STEP","bitrate_from","bitrate_to","direction","setMetricValue","metericName","args","metricObj","index","timeToFirstFrame","playbackAttr","time","cdn_request_id","metricValue","calculatedMetric","updateBufferStatus","bufferType","timeTakenToBuffer","firstBufferCompleted","captureStreamingLogs","stream_package","bitrate","seeked","timeTakenToSeek","updateSeekStatus","stop","parseResolution","RESOLUTION","width","height","errorOccured","text","toLocaleTimeString","toUTCString","play","playlistType","playlist_type","pause","ended","bufferCompleted","isBuffering","bufferingTime","loadeddata","toUpperCase","parseInt","dataloadedTime","seeking","timeUpdate","intPlayedTime","buffering","initialize","user_id","video_id","step","newAvgBitrate","addTrail","Utils","getSegmentInfo","segmentDuration","tech_","hls","playlists","media_","targetDuration","segmentIndex","Math","floor","segments","getPackageType","masterPlaylistController_","sourceType_","getPlaylistType","e","SampleVideos","_React$Component","props","_this","_callSuper","state","videos","_inherits","_this2","fetch","then","json","setState","_this3","classes","samples","React","createElement","Fragment","List","component","className","map","video","Tooltip","title","ListItem","button","onClick","handleChange","TextField","defaultValue","window","location","href","replace","pathname","url","fullWidth","root","Component","withStyles","theme","backgroundColor","palette","background","paper","GetVideo","_Component","videoid","subscribeToGetVideo","unsubscribe","_unsubscribe","prevProps","id","FormLabel","recent_views","defaultProps","gql","_templateObject","_taggedTemplateLiteral","SubscribeVideo","compose","graphql","GetVideoQuery","options","fetchPolicy","variables","getVideo","subscribeToMore","document","GetVideoSubscription","updateQuery","prev","_ref","newVideo","subscriptionData","AllVideos","_len","arguments","length","Array","_key","concat","renderStats","post","Avatar","total_views","ListItemText","primary","dense","divider","sort","a","b","subscribeToNewVideos","PopularVideos","AllVideosQuery","allVideo","AllVideosSubscription","_toConsumableArray","filter","__typename","ActiveUser","subscribeToUsers","activeuserid","user","Typography","variant","count","SubscribeActiveUser","GetActiveUserQuery","getActiveUser","ActiveUserSubscription","newUser","VideoJSPlayer","videoUrl","trails","getVideoId","bind","onPlay","onPause","__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__","utils","videojs","videoNode","on","segmentInfo","attributes","event","err","oldState","tempArray","split","dispose","target","endsWith","src","Grid","item","xs","Card","data-vjs-player","ref","node","Input","onChange","startAdornment","InputAdornment","position","CardActions","Button","color","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpandMoreIcon","ExpansionPanelDetails","defaultExpanded","trail","renderTrail","flexGrow","AppBar","Toolbar","client","AWSAppSyncClient","AppSync","auth","AUTH_TYPE","AWS_IAM","getCredentials","videoJsOptions","controls","preload","autoplay","html5","overrideNative","App","container","WithProvider","ApolloProvider","Rehydrated","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","getElementById","URL","process","origin","addEventListener","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.08aff79d.chunk.js","sourcesContent":["const awsmobile =  {\n    \"graphqlEndpoint\": \"QOS_GRAPHQL_ENDPOINT\",\n    \"authenticationType\": \"AWS_IAM\",\n    \"apiKey\": \"QOS_API_KEY\",\n    \"cloudfront_domain\": 'CLOUDFRONT_DOMAIN',\n    \"firehose\": {\n        DeliveryStreamName: \"QOS_DELIVERY_STREAM\"\n    },\n    \"aws\": {\n        region: \"QOS_DEPLOY_REGION\"\n    },\n    \"cognito\": {\n        IdentityPoolId: 'QOS_IDENTITY_POOL_ID'\n    }\n};\n\n// const awsmobile =  {\n//     \"graphqlEndpoint\": \"https://6wvgpg3yujfatgg735kmawspsm.appsync-api.us-west-2.amazonaws.com/graphql\",\n//     \"authenticationType\": \"AWS_IAM\",\n//     // \"apiKey\": \"da2-gb2efkzljbaidohw2is5owy2wy\",\n//     \"cloudfront_domain\": 'https://d2ncourldxvm3g.cloudfront.net/',\n//     \"firehose\": {\n//         DeliveryStreamName: \"mediaqos14-playerlogs-stream\"\n//     },\n//     \"aws\": {\n//         region: \"us-west-2\"\n//     },\n//     \"cognito\": {\n//         IdentityPoolId: 'us-west-2:3059e56b-bdb7-4291-aae5-aa69c72f5a76'\n//     }\n// };\n\nexport default awsmobile;\n","import * as AWS from 'aws-sdk';\nimport ClientConfig from './aws-exports';\n\nclass AWSConnector{\n\n  //initialize with ClientConfig\n  constructor(){\n    AWS.config.update(ClientConfig.aws);\n    console.log(\"Config \",ClientConfig);\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials(ClientConfig.cognito);\n    this.firehose = new AWS.Firehose();\n  }\n\n  //get Cognito user id\n  getUserId() {\n    let userId = AWS.config.credentials.params.IdentityId;\n    if(!userId){\n        console.log(\"In AWSConnector.getUserId \",userId);\n        AWS.config.credentials.refresh(function(){\n          AWS.config.credentials.params.IdentityId = AWS.config.credentials.identityId;\n          console.log(\"Login refreshed \",AWS.config.credentials.params.IdentityId);\n        });\n    }\n    return userId;\n  }\n\n  getCredentials() {\n    this.getUserId();\n    //console.log(\"In getCredentials \",AWS.config.credentials);\n    return AWS.config.credentials;\n  }\n\n  //push to Firehose\n  push(data, callback) {\n      var firehoseParams = ClientConfig.firehose;\n      firehoseParams.Record = {\n          Data: JSON.stringify(data) + \"\\n\"\n      }\n      this.firehose.putRecord(firehoseParams, callback);\n      return true;\n  }\n}\nexport default new AWSConnector();\n","import aws from './AWSConnector';\n\nexport var SDK = function(playerComponent) {\n  var player = playerComponent;\n  // console.log(player);\n  //----- common functions & variables-----\n\n  var sdk = this,\n    connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n\n  var getConnectionType = function() {\n      return {\n        type: connection ? connection.type || connection.effectiveType : \"not available\",\n        rtt: connection ? connection.rtt : -1\n      };\n    },\n    resetVideo = function(videoId) {\n      return {\n        videoId: videoId,\n        previousTime: 0,\n        currentTime: 0,\n        seekStart: null,\n        seekStartTime: 0,\n        seekEndTime: 0,\n        loadStarted: 0,\n        dataLoaded: null,\n        percentSeen: 0,\n        packageType: null,\n        avgBitrate: 0,\n        duration: 0,\n        resolution: null,\n        frameRate: 0,\n        bufferStarted:0,\n      };\n    },\n    resetUser = function(userId) {\n      return {\n        cognitoId: userId,\n        firstNAme: '',\n        lastName: ''\n      };\n    },\n    getUser = function() {\n      // console.log(\"In getUser\");\n      var userId = aws.getUserId();\n      // console.log(\"User id \",userId);\n      if(userId){\n        displayMetrics(\"User Id : \", userId);\n      }\n      return userId;\n    },\n    initialize = function(videoId) {\n      console.log(\"In initialize :\",videoId);\n      currentVideo = resetVideo(videoId);\n      currentUser = resetUser(getUser());\n      // console.log(\"Current user :\",currentUser);\n      commonAttr = {\n        user_id: currentUser.cognitoId,\n        video_id: currentVideo.videoId\n      };\n    },\n    //----- Push metrics to Firehose -----\n    sendToAWS = function(calculatedMetrics) {\n      // console.log(\"Sending Data To AWS ...\");\n      console.log(calculatedMetrics);\n      aws.push(calculatedMetrics, function(error, data) {\n        if (error) {\n          console.log(\"error\");\n        }\n      });\n    },\n    currentUser = resetUser(),\n    currentVideo = resetVideo(),\n    commonAttr = {},\n    // cdnTrackingId = '',\n    connectionType = getConnectionType();\n\n  //-----Defining the Metrics -----\n\n  var Metric = function(MetricType, MetricValue) {\n\n      //structure of the metric object\n      var metric = {\n        MetricType,\n        ...MetricValue,\n        ...commonAttr,\n        TimeStamp: Date.now()\n        // isotimestamp: (new Date()).toISOString()\n      };\n\n      return metric;\n    },\n    MetricType = [\"PLAY\",\"FIRSTFRAME\", \"SEEK\", \"BUFFER\", \"STREAM\", \"STEP\", \"PAUSE\", \"ERROR\", \"STOP\"],\n    PLAY = {\n      at: '',//playback position\n      duration: '',\n    },\n    FIRSTFRAME = {\n      rtt: '',//round trip time\n      connection_type: '',//3g or 4g\n      package: '', //HLS or DASH\n      resolution: '',\n      fps: '',\n      avg_bitrate: '',\n      time_millisecond: '',\n      cdn_tracking_id: '',\n    },\n    SEEK = {\n      seek_from: '',\n      seek_to: '',\n      rtt: '',\n      connection_type: '',\n      time_millisecond: '',\n      cdn_tracking_id: ''\n    },\n    BUFFER = {\n      buffer_type: '',\n      at: '',//playback position\n      rtt: '',\n      connection_type: '',\n      time_millisecond: '',\n      cdn_tracking_id: ''\n    },\n    STREAM = {\n      at: '',\n      rtt: '',\n      connection_type: '',\n      package: '',\n      // aspect_ratio: '',\n      resolution: '',\n      fps: '',\n      avg_bitrate: '',\n      duration: '',\n      cdn_tracking_id:''\n    },\n    STEP = {\n      at: '',//playback position\n      bitrate_from: '',\n      bitrate_to: '',\n      direction: '',//quality UP or DOWN\n      package: '',\n      resolution: '',\n      fps: '',\n      connection_type: '',\n    },\n    STOP = {\n      at: '',\n      duration: '',\n      connection_type: '',\n      package: '',\n      // aspect_ratio: '',\n      resolution: '',\n      fps: '',\n      avg_bitrate: '',\n    },\n    PAUSE = {\n      at: '',\n      duration: '',\n    },\n    ERROR = {\n      at: '',\n      message: '',\n      cdn_tracking_id: ''\n    },\n    MetricValue = {\n      FIRSTFRAME,\n      SEEK,\n      PLAY,\n      BUFFER,\n      PAUSE,\n      ERROR,\n      STOP,\n      STREAM,\n      STEP\n    },\n    setMetricValue = function(metericName, args) {\n      var metricObj = MetricValue[metericName];\n      var index = 0;\n      for (var key in metricObj) {\n        metricObj[key] = args[index++];\n      }\n      return metricObj;\n    };\n\n  //-----Defining the player event function handlers ------\n\n  var play = function(playlistType) {\n    console.log(\"In play with playlistType \",playlistType);\n      displayMetrics(\"Video Start at \", new Date().toLocaleTimeString());\n      var metericName = \"PLAY\";\n      //set whether the video being played is VOD or Live\n      commonAttr.playlist_type = playlistType;\n      var metricValue = setMetricValue(metericName, [currentVideo.currentTime, currentVideo.duration]);\n      var calculatedMetric = Metric(metericName, metricValue);\n      return sendToAWS(calculatedMetric);\n    },\n    loadStarted = function() {\n      currentVideo.loadStarted = Date.now();\n    },\n    loadeddata = function(duration, packageType, playbackAttr, cdn_request_id, rtt) {\n      currentVideo.packageType = packageType.toUpperCase();\n      if(playbackAttr[\"AVERAGE-BANDWIDTH\"]){\n        currentVideo.avgBitrate = parseInt(playbackAttr[\"AVERAGE-BANDWIDTH\"]);\n      }\n      else{\n        currentVideo.avgBitrate = 0;\n      }\n      currentVideo.duration = duration;\n      currentVideo.resolution = parseResolution(playbackAttr);\n      currentVideo.frameRate = playbackAttr[\"FRAME-RATE\"];\n\n      var dataloadedTime = Date.now();\n\n      if (!currentVideo.dataLoaded) {\n        timeToFirstFrame(playbackAttr, dataloadedTime - currentVideo.loadStarted, cdn_request_id, rtt);\n      }\n      currentVideo.dataLoaded = dataloadedTime;\n    },\n    timeToFirstFrame = function(playbackAttr, time, cdn_request_id, rtt) {\n      displayMetrics(\"Time to First Frame \", time + ' ms');\n\n      var metericName = \"FIRSTFRAME\";\n      connectionType = getConnectionType();\n      var metricValue = setMetricValue(metericName, [rtt, connectionType.type, currentVideo.packageType, currentVideo.resolution,\n        playbackAttr[\"FRAME-RATE\"], playbackAttr[\"AVERAGE-BANDWIDTH\"], time, cdn_request_id\n      ]);\n      var calculatedMetric = Metric(metericName, metricValue);\n      return sendToAWS(calculatedMetric);\n    },\n    buffering = function(time) {\n      if(time === 0){\n        displayMetrics(\"Initial buffering..\", '');\n      }\n      else{\n        displayMetrics(\"Buffering at :\", time);\n      }\n      currentVideo.isBuffering = true;\n      currentVideo.bufferStarted = Date.now();\n    },\n    bufferCompleted = function(cdn_request_id, rtt) {\n      var time = currentVideo.currentTime;\n      if (currentVideo.isBuffering) {\n        var bufferingTime = Date.now() - currentVideo.bufferStarted;\n        updateBufferStatus(\"ScreenFreezedBuffer\", bufferingTime, time, cdn_request_id, rtt);\n      } else {\n        firstBufferCompleted(time, cdn_request_id, rtt );\n      }\n      if (currentVideo.seekStart) {\n        seeked(currentVideo.previousTime);\n      }\n      return currentVideo.isBuffering = false;\n    },\n    updateBufferStatus = function(bufferType, timeTakenToBuffer, time, cdn_request_id, rtt) {\n      var metericName = \"BUFFER\";\n      connectionType = getConnectionType();\n      var metricValue = setMetricValue(metericName, [bufferType, time, rtt, connectionType.type, timeTakenToBuffer, cdn_request_id]);\n      var calculatedMetric = Metric(metericName, metricValue);\n      // displayMetrics(\"Completed \" + bufferType + \" at :\", new Date().toLocaleTimeString());\n      displayMetrics(bufferType + \" ready in :\", timeTakenToBuffer + \" ms\");\n      return sendToAWS(calculatedMetric);\n    },\n    firstBufferCompleted = function(time, cdn_request_id, rtt) {\n      var timeTakenToBuffer = Date.now() - currentVideo.loadStarted;\n      return updateBufferStatus(\"FirstBuffer\", timeTakenToBuffer, currentVideo.currentTime, cdn_request_id, rtt);\n    },\n    step = function(playbackAttr, packageType, time) {\n      var metericName = \"STEP\";\n      let newAvgBitrate = 0;\n      if(playbackAttr[\"AVERAGE-BANDWIDTH\"]){\n        newAvgBitrate = parseInt(playbackAttr[\"AVERAGE-BANDWIDTH\"])\n      }\n      else{\n        newAvgBitrate = 0;\n      }\n      // let newAvgBitrate = parseInt(playbackAttr[\"AVERAGE-BANDWIDTH\"]);\n      let direction;\n\n      currentVideo.packageType = packageType.toUpperCase();\n      //if current bitrate is 0, then its the step down operation\n      //at the start of play\n      if(currentVideo.avgBitrate === 0){\n        direction = 'DOWN';\n      }\n      else{\n        direction = (currentVideo.avgBitrate > newAvgBitrate) ? 'DOWN' : 'UP';\n      }\n      connectionType = getConnectionType();\n      var metricValue = setMetricValue(metericName, [currentVideo.currentTime, currentVideo.avgBitrate, newAvgBitrate, direction, currentVideo.packageType, currentVideo.resolution, currentVideo.frameRate,  connectionType.type]);\n      // playbackAttr[\"FRAME-RATE\"]\n      var calculatedMetric = Metric(metericName, metricValue);\n\n      //set the new Avg Bitrate being streamed\n      currentVideo.avgBitrate = parseInt(newAvgBitrate);\n      displayMetrics(\"Bitrate Step \" + direction + \" at :\", currentVideo.currentTime);\n      return sendToAWS(calculatedMetric);\n    },\n    timeUpdate = function(time, duration, cdn_request_id,rtt) {\n      currentVideo.previousTime = currentVideo.currentTime;\n      currentVideo.currentTime = time;\n\n      var intPlayedTime = parseInt(time, 10);\n\n      if (currentVideo.percentSeen !== intPlayedTime) {\n          currentVideo.percentSeen = intPlayedTime;\n          captureStreamingLogs(currentVideo.packageType, currentVideo.resolution, currentVideo.frameRate, currentVideo.avgBitrate, currentVideo.duration,cdn_request_id,rtt);\n      }\n    },\n    captureStreamingLogs = function(stream_package, resolution, fps, bitrate, duration,cdn_request_id,rtt) {\n      var metericName = \"STREAM\";\n      connectionType = getConnectionType();\n      var metricValue = setMetricValue(metericName, [currentVideo.currentTime, rtt, connectionType.type, stream_package, resolution, fps, bitrate, duration, cdn_request_id]);\n      displayMetrics(\"Streaming at :\", currentVideo.currentTime);\n      var calculatedMetric = Metric(metericName, metricValue);\n      return sendToAWS(calculatedMetric);\n    },\n    seeking = function() {\n      if (currentVideo.seekStart === null) {\n        currentVideo.seekStart = currentVideo.previousTime;\n        currentVideo.seekStartTime = Date.now();\n      }\n      currentVideo.isBuffering = true;\n    },\n    seeked = function(currentTime,cdn_request_id,rtt) {\n      var timeTakenToSeek = Date.now() - currentVideo.seekStartTime;\n      displayMetrics('Seeked from ', currentVideo.seekStart + ' to ' + currentTime + ' in ' + timeTakenToSeek + ' ms');\n      updateSeekStatus(currentTime, timeTakenToSeek,cdn_request_id,rtt);\n      return currentVideo.seekStart = null;\n    },\n    updateSeekStatus = function(currentTime, timeTakenToSeek,cdn_request_id,rtt) {\n      var metericName = \"SEEK\";\n      connectionType = getConnectionType();\n      var metricValue = setMetricValue(metericName, [currentVideo.seekStart, currentTime, rtt, connectionType.type, timeTakenToSeek, cdn_request_id]);\n      var calculatedMetric = Metric(metericName, metricValue);\n      return sendToAWS(calculatedMetric);\n    },\n    pause = function() {\n      //to avoid firing pause metric which is also called when video playback is //finished\n      if (currentVideo.currentTime === currentVideo.duration) return;\n\n      displayMetrics(\"Video Paused at \", currentVideo.currentTime);\n      var metericName = \"PAUSE\";\n      var metricValue = setMetricValue(metericName, [currentVideo.currentTime, currentVideo.duration]);\n      var calculatedMetric = Metric(metericName, metricValue);\n      return sendToAWS(calculatedMetric);\n    },\n    ended = function(currentTime, duration) {\n      var text = '';\n      if (currentTime === duration) {\n        text = \"Finished playing at\";\n        stop(currentTime);\n      } else {\n        text = \"Video Ended with some error at \"\n        errorOccured(currentTime, text + new Date().toUTCString());\n      }\n      displayMetrics(text, new Date().toLocaleTimeString());\n      // return stop();\n    },\n    stop = function(time) {\n      displayMetrics(\"Video Stopped at \", time);\n      var metericName = \"STOP\";\n      connectionType = getConnectionType();\n      var metricValue = setMetricValue(metericName, [time, currentVideo.duration, connectionType.type, currentVideo.packageType, currentVideo.resolution, currentVideo.frameRate, currentVideo.avgBitrate]);\n      var calculatedMetric = Metric(metericName, metricValue);\n      return sendToAWS(calculatedMetric);\n    },\n    parseResolution = function(playbackAttr) {\n      return playbackAttr.RESOLUTION.width + \"x\" + playbackAttr.RESOLUTION.height;\n    },\n    errorOccured = function(time, cdn_request_id, error) {\n      var text = \"Some thing went wrong at \";\n      displayMetrics(text, new Date().toLocaleTimeString());\n      error = error || text + new Date().toUTCString();\n\n      var metericName = \"ERROR\";\n      var metricValue = setMetricValue(metericName, [time, \"Error\", cdn_request_id]);\n      var calculatedMetric = Metric(metericName, metricValue);\n      return sendToAWS(calculatedMetric);\n    };\n\n  //-------------------------------All Functions exposed by SDK when you create an object -------------------------------------------------------------------------------------------\n  sdk.play = play;\n  sdk.pause = pause;\n  sdk.stop = stop;\n  sdk.errorOccured = errorOccured;\n  sdk.ended = ended;\n  sdk.bufferCompleted = bufferCompleted;\n  sdk.loadeddata = loadeddata;\n  sdk.loadStarted = loadStarted;\n  sdk.seeked = seeked;\n  sdk.seeking = seeking;\n  sdk.timeUpdate = timeUpdate;\n  sdk.buffering = buffering;\n  sdk.initialize = initialize;\n  sdk.step = step;\n  sdk.getUser = getUser;\n\n  //-----Extendable Functions to create push custom metrics-----\n  // var publishCustomMetric = function(MetricType, MetricValue) {\n  //   MetricType = MetricType.toLocaleUpperCase();\n  //   var calculatedMetric = Metric(MetricType, MetricValue);\n  //   displayMetrics(\"Custom metric \" + MetricType + \" published at\", new Date().toLocaleTimeString());\n  //   return sendToAWS(calculatedMetric);\n  // }\n  //\n  // sdk.publishCustomMetric = publishCustomMetric;\n\n  //-----This is used to show activities on screen-----\n  var displayMetrics = function(data, value) {\n    player.addTrail(data, value);\n  }\n  sdk.displayMetrics = displayMetrics;\n\n  return sdk;\n};\n","export var Utils = function() {\n\n  this.getSegmentInfo = function(player) {\n    let segmentDuration = player.tech_.hls.playlists.media_.targetDuration;\n    let segmentIndex = Math.floor(player.currentTime() / segmentDuration);\n    // console.log(\"In timeupdate.segmentCount \",segmentIndex);\n    let segmentInfo = player.tech_.hls.playlists.media_.segments[segmentIndex];\n    return segmentInfo;\n  };\n\n  this.getPackageType = function(player) {\n    return player.tech_.hls.masterPlaylistController_.sourceType_;\n  };\n\n  this.getPlaylistType = function(player) {\n    console.log(\"In getPlaylistType :\", player);\n    try {\n      return player.tech_.hls.playlists.media_.playlistType;\n    } catch (e) {\n      return \"LIVE\";\n    }\n  };\n  return this;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport AppSync from '../sdk/aws-exports.js';\n\nconst styles = (theme) => ({\n  root: {\n    width: '100%',\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass SampleVideos extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {videos:[]};\n  }\n\n  componentDidMount() {\n    // console.log(\"In SampleVideos.componentDidMount\");\n    fetch('videos.json').then(data => data.json())\n    .then(data => {\n      this.setState({videos: data});\n      console.log(\"fetched sample video URLs \",this.state.videos);\n    });\n  }\n\n  render() {\n    // console.log(\"In SampleVideos.render :\",this.props);\n    const { classes } = this.props;\n\n    const samples = (\n    <React.Fragment>\n    <List component=\"nav\" className=\"listroot\">\n      {this.state.videos.map((video,index) =>\n        <Tooltip title=\"click to select\" key={index}>\n        <ListItem button onClick={this.props.handleChange}>\n          <TextField defaultValue={window.location.href.replace(window.location.pathname,\"\")+video.url} fullWidth/>\n        </ListItem>\n        </Tooltip>\n      )}\n    </List>\n    </React.Fragment>\n    );\n\n    return (\n      <div className={classes.root}>\n        {samples}\n        </div>\n    );\n  }\n}\n\nSampleVideos.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SampleVideos);\n","import React, { Component } from \"react\";\nimport FormLabel from '@material-ui/core/FormLabel';\nimport './css/VideoPlayer.css';\n\nexport default class GetVideo extends Component {\n\nconstructor(props) {\n  super(props);\n  //console.log(\"In GetVideo.constructor :\", props);\n  this.state = {\n    videoid: ''\n  }\n}\n\nstatic defaultProps = {\n  video: {},\n}\n\n_unsubscribe() {\n  //console.log(\"In GetVideo.unsubscribe\");\n  this.subscribeToGetVideo && this.subscribeToGetVideo.unsubscribe();\n}\n\ncomponentWillUnmount() {\n  //console.log(\"In GetVideo.componentWillUnmount\");\n  this._unsubscribe();\n}\n\ncomponentDidMount() {\n  //console.log(\"In GetVideo.componentDidMount\");\n  //this.props.dataRefetch(this.state.videoid);\n}\n\ncomponentDidUpdate(prevProps) {\n  // Typical usage (don't forget to compare props):\n  //console.log(\"In GetVideo.componentDidUpdate.prevProps \",prevProps);\n  //console.log(\"In GetVideo.componentDidUpdate.props \",this.props);\n\n  if (this.props.videoid !== prevProps.videoid) {\n    this._unsubscribe();\n  }\n}\n\nrender() {\n  const { video } = this.props;\n  //console.log(\"In GetVideo.render :\",this.props);\n\n    if(video && video.id){\n      return (\n            <FormLabel>#People watching: {video.recent_views}</FormLabel>\n      )\n    }\n    else{\n      return ('')\n    }\n  }\n}\n","import gql from 'graphql-tag';\n\nexport default gql`\nquery GetVideo($id: ID!) {\n    getVideo (id: $id){\n            __typename\n            id\n            recent_views\n            total_views\n        }\n}`;\n","import gql from 'graphql-tag';\n\nexport default gql`\nsubscription GetVideoSub($id: ID!) {\nnewVideo(id: $id) {\n    __typename\n    id\n    recent_views\n    total_views\n}\n}`;\n","import {\n  graphql,\n  compose\n} from 'react-apollo';\nimport GetVideo from \"./GetVideo\";\nimport GetVideoQuery from '../Queries/GetVideoQuery';\nimport GetVideoSubscription from '../Queries/GetVideoSubscription';\n\nexport const SubscribeVideo = compose(\n  graphql(GetVideoQuery, {\n    options: (props) => ({\n      fetchPolicy: 'cache-and-network',\n      variables: {\n        id: props.videoid\n      },\n    }),\n    props: (props) =>\n        ({\n        video: props.data.getVideo,\n        // START - NEW PROP :\n        subscribeToGetVideo: params => {\n          props.data.subscribeToMore({\n            document: GetVideoSubscription,\n            variables: {\n              id: this.props.videoid\n            },\n            updateQuery: (prev, {\n              subscriptionData: {\n                data: {\n                  newVideo\n                }\n              }\n            }) => ({\n              newVideo\n            })\n            // {\n            //   return newVideo;\n            // }\n          });\n        },\n        // dataRefetch: (videoid) => {\n        //   props.data.refetch({\n        //     id: videoid\n        //   })\n        // },\n        // END - NEW PROP\n      })\n  })\n)(GetVideo);\n","import React, { Component } from \"react\";\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport './css/VideoPlayer.css';\n\nexport default class AllVideos extends Component {\n\n    static defaultProps = {\n        videos: [],\n    }\n\n    renderStats = (post) => {\n  //  console.log(\"In post :%j\",post);\n\n        return (\n\n        <ListItem key={post.id} className=\"listitem\">\n          <Avatar>{post.total_views}</Avatar>\n          <ListItemText primary={post.id}/>\n        </ListItem>\n        );\n    }\n\n    render() {\n        const { videos } = this.props;\n        //console.log(\"In AllVideos.render\");\n\n        return (\n        <List className=\"listroot\" dense divider=\"true\">\n            {[].concat(videos).sort((a, b) => b.total_views - a.total_views).map(this.renderStats)}\n        </List>\n\n        );\n    }\n\n    componentWillMount(){\n      this.props.subscribeToNewVideos();\n    }\n\n    _unsubscribe() {\n      console.log(\"In GetVideo.unsubscribe\");\n      this.subscribeToNewVideos && this.subscribeToNewVideos.unsubscribe();\n    }\n\n    componentWillUnmount() {\n      this._unsubscribe();\n    }\n}\n","import gql from 'graphql-tag';\n\nexport default gql`\nquery AllVideos {\n    allVideo {\n        videos {\n            __typename\n            id\n            recent_views\n            total_views\n        }\n    }\n}`;\n","import gql from 'graphql-tag';\n\nexport default gql`\nsubscription NewVideoSub {\nnewVideo {\n    __typename\n    id\n    recent_views\n    total_views\n}\n}`;\n","import {\n  graphql,\n  compose\n} from 'react-apollo';\nimport AllVideos from \"./AllVideos\";\nimport AllVideosQuery from '../Queries/AllVideosQuery';\nimport AllVideosSubscription from '../Queries/AllVideosSubscription';\n\nexport const PopularVideos = compose(\n  graphql(AllVideosQuery, {\n    options: {\n      fetchPolicy: 'cache-and-network'\n    },\n    props: (props) => ({\n      videos: props.data.allVideo && props.data.allVideo.videos,\n      // START - NEW PROP :\n      subscribeToNewVideos: params => {\n        props.data.subscribeToMore({\n          document: AllVideosSubscription,\n          updateQuery: (prev, {\n            subscriptionData: {\n              data: {\n                newVideo\n              }\n            }\n          }) => ({\n            ...prev,\n            allVideo: {\n              videos: [newVideo, ...prev.allVideo.videos.filter(post => post.id !== newVideo.id)],\n              __typename: 'PaginatedVideos'\n            }\n          })\n        });\n      },\n      // END - NEW PROP\n    })\n  })\n)(AllVideos);\n","import React, { Component } from \"react\";\nimport Typography from '@material-ui/core/Typography';\nimport './css/VideoPlayer.css';\n\nexport default class ActiveUser extends Component {\n\nconstructor(props) {\n  super(props);\n  //console.log(\"In ActiveUser.constructor :\", props);\n}\n\nstatic defaultProps = {\n  user: {},\n}\n\n_unsubscribe() {\n  //console.log(\"In GetActiveUser.unsubscribe\");\n  this.subscribeToUsers && this.subscribeToUsers.unsubscribe();\n}\n\ncomponentWillUnmount() {\n  //console.log(\"In GetActiveUser.componentWillUnmount\");\n  this._unsubscribe();\n}\n\ncomponentWillMount() {\n  //console.log(\"In GetActiveUser.componentWillMount \",this);\n  this.props.subscribeToUsers();\n  //this.props.dataRefetch(this.state.videoid);\n}\n\ncomponentDidUpdate(prevProps) {\n  // Typical usage (don't forget to compare props):\n  //console.log(\"In GetActiveUser.componentDidUpdate.prevProps \",prevProps);\n  //console.log(\"In GetActiveUser.componentDidUpdate.props \",this.props);\n\n  if (this.props.activeuserid !== prevProps.activeuserid) {\n    this._unsubscribe();\n  }\n}\n\nrender() {\n  const { user } = this.props;\n  //console.log(\"In GetActiveUser.render :\",this.props);\n\n    if(user && user.id){\n      return (\n            <Typography variant=\"h1\">{user.count}</Typography>\n      )\n    }\n    else{\n      return ('')\n    }\n  }\n}\n","import gql from 'graphql-tag';\n\nexport default gql`\nquery GetActiveUser($id: ID!) {\n      getActiveUser(id: $id) {\n            __typename\n            id\n            count\n        }\n}`;\n","import gql from 'graphql-tag';\n\nexport default gql`\nsubscription NewActiveUser {\nnewUser {\n    __typename\n    id\n    count\n}\n}`;\n","import {\n  graphql,\n  compose\n} from 'react-apollo';\nimport ActiveUser from \"./ActiveUser\";\nimport GetActiveUserQuery from '../Queries/GetActiveUserQuery';\nimport ActiveUserSubscription from '../Queries/ActiveUserSubscription';\n\nexport const SubscribeActiveUser = compose(\n  graphql(GetActiveUserQuery, {\n    options: (props) => ({\n      fetchPolicy: 'cache-and-network',\n      variables: {\n        id: 'recent'\n      },\n    }),\n    props: (props) =>\n        ({\n        user: props.data.getActiveUser,\n        // START - NEW PROP :\n        subscribeToUsers: params => {\n          props.data.subscribeToMore({\n            document: ActiveUserSubscription,\n            // variables: {\n            //   id: 'recent'\n            // },\n            updateQuery: (prev, {\n              subscriptionData: {\n                data: {\n                  newUser\n                }\n              }\n            }) => ({\n              // ...prev,\n              // getActiveUser: {\n                newUser\n              // }\n            })\n          });\n        },\n        // dataRefetch: (videoid) => {\n        //   props.data.refetch({\n        //     id: videoid\n        //   })\n        // },\n        // END - NEW PROP\n      })\n  })\n)(ActiveUser);\n","import React from 'react';\n\n//import player library and QoS SDK\nimport videojs from 'video.js';\nimport {SDK} from '../sdk/QoSSDK';\nimport {Utils} from '../sdk/videojs/utils';\n\n//import material UI components\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport Input from '@material-ui/core/Input';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n//import custom user interface definitions\nimport SampleVideos from './SampleVideos';\nimport {SubscribeVideo} from './SubscribeVideo';\nimport {PopularVideos} from './PopularVideos';\nimport {SubscribeActiveUser} from './SubscribeActiveUser';\n\n//import styling\nimport './css/VideoPlayer.css';\n\nexport default class VideoJSPlayer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    // console.log(props);\n    this.state = {\n      videoUrl: '',\n      trails: [],\n      videoid: ''\n    };\n    // console.log(\"In VideoJSPlayer.constructor.this :\",this);\n\n    this.getVideoId = this.getVideoId.bind(this);\n    this.onPlay = this.onPlay.bind(this);\n    this.onPause = this.onPause.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.addTrail = this.addTrail.bind(this);\n  }\n\n  componentWillMount(){\n    window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__ = true;\n  }\n\n  //called when the component is mounted\n  componentDidMount() {\n\n    //initialize the QoS SDK\n    var sdk = new SDK(this);\n    this.sdk = sdk;\n    var utils = new Utils();\n\n    //initialize user\n    sdk.getUser();\n\n    // instantiate Video.js\n    this.player = videojs(this.videoNode, this.props, function onPlayerReady() {\n      // console.log('onPlayerReady', this);\n    });\n\n    //-----Capturing Events for SDK-----\n\n    //fired when video is played\n    this.player.on('play', function() {\n      sdk.play(utils.getPlaylistType(this));\n    });\n\n    //Fired when the user agent begins looking for the media\n    this.player.on('loadstart', sdk.loadStarted);\n\n    //fired when the metadata,first frame info of the media is available\n    this.player.on('loadeddata', function() {\n      // console.log(\"In loadeddata :\", this);\n      let segmentInfo = utils.getSegmentInfo(this);\n      sdk.loadeddata(this.duration(), utils.getPackageType(this), this.tech_.hls.playlists.media_.attributes, segmentInfo.cdn_request_id, segmentInfo.rtt);\n    });\n\n    //fired when the player is waiting for buffer to fill in\n    this.player.on('waiting', function() {\n      sdk.buffering(this.currentTime());\n    });\n\n    //fired once the player has estimated that it has enough media in the buffer to //start playback\n    this.player.on('canplaythrough', function() {\n      // console.log(\"In canplaythrough \",this);\n      let segmentInfo = utils.getSegmentInfo(this);\n      // console.log(\"Segment Info :\",segmentInfo);\n      sdk.bufferCompleted(segmentInfo.cdn_request_id, segmentInfo.rtt);\n    });\n\n    //fired every few milli seconds as play back position changes\n    this.player.on('timeupdate', function() {\n      var intPlayedTime = parseInt(this.currentTime(), 10);\n      let everyFiveSec = intPlayedTime % 5 === 0 && intPlayedTime !== 0;\n\n      //process it only every 5 seconds.\n      if (everyFiveSec) {\n        let segmentInfo = utils.getSegmentInfo(this);\n        // console.log(\"In timeupdate \",this.tech_.hls.playlists.media_.segments);\n        sdk.timeUpdate(this.currentTime(),this.duration(), segmentInfo.cdn_request_id,segmentInfo.rtt);\n      }\n    });\n\n    this.player.on('seeking', sdk.seeking);\n    this.player.on('seeked', function() {\n      let segmentInfo = utils.getSegmentInfo(this);\n      sdk.seeked(this.currentTime(),segmentInfo.cdn_request_id,segmentInfo.rtt);\n    });\n\n    //fired when there is a switch in bitrate\n    this.player.on('mediachange', function(event) {\n      console.log(\"In mediachange :\", this);\n      sdk.step(this.tech_.hls.playlists.media_.attributes, utils.getPackageType(this), this.currentTime());\n    });\n\n    //fired when video.js player encounters an 'error'\n    this.player.on('error', function(err) {\n      let segmentInfo = utils.getSegmentInfo(this);\n      sdk.errorOccured(this.currentTime(), segmentInfo.cdn_request_id, err);\n    });\n\n    //fired when video is paused.\n    this.player.on('pause', sdk.pause);\n\n    //fired when playback has finished\n    this.player.on('ended', function() {\n      sdk.ended(this.currentTime(), this.duration());\n    });\n\n    //\n    // this.player.on('playing',function(){\n    //   // console.log(\"In playing \",this);\n    // });\n    // this.player.on('progress', function(event) {\n    //   // console.log(\"In progress \",this);\n    // });\n  }\n\n  //-----Show activities in 'Metric Captured' component\n  addTrail(message, at) {\n    // console.log(\"In addTrail : %s %s\",message,at);\n    this.setState(oldState => ({\n      trails: [{\n        message: message,\n        at: at\n      }, ...oldState.trails],\n    }));\n  }\n\n  getVideoId(url) {\n    var tempArray = url.split(\"/\");\n    var tempVideoName = tempArray[tempArray.length - 1].split(\".\")[0];\n    return tempVideoName;\n  }\n\n  // destroy player on unmount\n  componentWillUnmount() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  }\n\n  handleChange(e) {\n    console.log(\"In VideoJSPlayer.handleChange \",e.target.value);\n    this.setState({\n      videoUrl: e.target.value\n    });\n  }\n\n  onPlay(e) {\n    // console.log(\"In play\",e);\n    //if player is not initialized yet, do nothing\n    if(!this.player)return;\n\n    let videoUrl = this.state.videoUrl;\n\n    if (videoUrl) {\n      //for dash packaging\n      if (videoUrl.endsWith(\".mpd\")) {\n        this.player.src({\n          src: videoUrl,\n          type: 'application/dash+xml'\n        });\n      } else {\n        this.player.src(videoUrl);\n      }\n\n      var videoId = this.getVideoId(this.player.src());\n      // console.log(\"videoid \",videoId);\n      this.setState(oldState => ({\n        trails: [],\n        videoid: videoId\n      }));\n      this.sdk.initialize(videoId);\n      this.player.play();\n    }\n  }\n\n  onPause(e) {\n    // console.log(\"In pause\");\n    this.player.pause();\n  }\n  // wrap the player in a div with a `data-vjs-player` attribute\n  // so videojs won't create additional wrapper in the DOM\n  // see https://github.com/videojs/video.js/pull/3856\n  render() {\n\n    return (\n      <React.Fragment>\n\n        <Grid item xs={6} className=\"videoelement\">\n        <Card>\n            <div data-vjs-player>\n              <video ref={ node => this.videoNode = node } className=\"video-js\"></video>\n            </div>\n            <Input id=\"video_url\" value={this.state.videoUrl} onChange={this.handleChange} className=\"videourl\" startAdornment={<InputAdornment position=\"start\">URL:</InputAdornment>}/>\n            <CardActions>\n            <Button variant=\"contained\" color=\"primary\" onClick={this.onPlay}>\n              Play\n            </Button>\n            <Button variant=\"contained\" color=\"primary\" onClick={this.onPause}>\n              Pause\n            </Button>\n            <SubscribeVideo videoid={this.state.videoid}/>\n            </CardActions>\n        </Card>\n        <ExpansionPanel>\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n            <Typography variant=\"body2\">Sample Videos</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n              <SampleVideos {...this}/>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n        </Grid>\n        <Grid item xs={6}>\n        <ExpansionPanel defaultExpanded>s\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n            <Typography variant=\"body2\">Active Users</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails className=\"activeuser\">\n            <SubscribeActiveUser />\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n        <ExpansionPanel>\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n            <Typography variant=\"body2\">Popular Videos (total views)</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <PopularVideos />\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n        <ExpansionPanel defaultExpanded>\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n            <Typography variant=\"body2\">Metrics Captured</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <List className=\"listroot\">\n              {this.state.trails.map((trail,index) => this.renderTrail(trail,index))}\n            </List>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n        </Grid>\n        </React.Fragment>\n    )\n  }\n\n  renderTrail(trail,index){\n  //  console.log(\"trail \",trail.uniqueId);\n    return (\n        <ListItem key={index} dense divider>\n          <ListItemText primary={trail.message+' '+trail.at}/>\n        </ListItem>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n  },\n};\n\nfunction SimpleAppBar(props) {\n  const { classes } = props;\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" color=\"inherit\">\n            Demo - Player\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n\nSimpleAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SimpleAppBar);\n","import AWSAppSyncClient from \"aws-appsync\";\nimport { Rehydrated } from 'aws-appsync-react';\nimport { AUTH_TYPE } from \"aws-appsync/lib/link/auth-link\";\nimport { ApolloProvider } from 'react-apollo';\nimport React, { Component } from 'react';\nimport VideoJSPlayer from \"./Components/VideoJSPlayer\";\nimport Grid from '@material-ui/core/Grid';\nimport AppBar from './Components/AppBar';\nimport AppSync from './sdk/aws-exports.js';\nimport AWSConnector from './sdk/AWSConnector';\nimport './App.css';\n\nconst client = new AWSAppSyncClient({\n    url: AppSync.graphqlEndpoint,\n    region: AppSync.aws.region,\n    auth: {\n        type: AUTH_TYPE.AWS_IAM,\n        credentials: () => AWSConnector.getCredentials(),\n        // apiKey: AppSync.apiKey,\n    },\n});\n\nconst videoJsOptions = {\n    controls: true,\n    width: 620,\n    height: 348,\n    preload: \"auto\",\n    autoplay: true,\n    //following added for Safari support\n    html5: {\n      hls: {\n        overrideNative: true\n      }\n    }\n};\n\nclass App extends Component {\n    render() {\n        return (\n          <div className=\"gridroot\">\n     <Grid container>\n       <Grid container item xs={12}>\n        <AppBar />\n       </Grid>\n       <Grid container item xs={12}>\n         <VideoJSPlayer {...videoJsOptions} />\n       </Grid>\n     </Grid>\n   </div>\n      );\n    }\n}\n\nconst WithProvider = () => (\n    <ApolloProvider client={client}>\n      <Rehydrated>\n        <App />\n      </Rehydrated>\n    </ApolloProvider>\n);\n\nexport default WithProvider;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}